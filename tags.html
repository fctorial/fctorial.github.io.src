<!DOCTYPE html>
<html lang="en">
<body>
<article>
    <header>
        <h3 id="main_title">Tags</h3>
    </header>
    <ul class="tags_list">
    </ul>
</article>
</body>
<script constexpr src="/static/js/constexpr/lib.js"></script>
<script constexpr src="/static/js/constexpr/index.js"></script>
<script constexpr src="/static/js/constexpr/renderer.js"></script>

<script constexpr>
  async function page_specific_stuff() {
    const posts = await (await fetch('/collections/posts.json')).json()
    const tags = new Set()
    posts.forEach(p => p.tags.forEach(tag => tags.add(tag)))
    const list = document.querySelector('ul')
    tags.forEach(tag => {
      list.appendChild(make_element(`<li><a class="tag_element" href="/tags/generator.html?${tag}"><div>${tag}</div></a></li>`))
    })
    window._ConstexprJS_.addPaths(Array.from(tags).map(tag => ({generator: `/tags/generator.html?${tag}`, output: `/tags/${tag}.html`})))
  }
</script>

<script constexpr>
  Promise.all([render_page(), page_specific_stuff()])
    .then(() => window._ConstexprJS_.compile())
</script>

<style>
    ul {
        flex-direction: column;
    }
</style>

</html>
