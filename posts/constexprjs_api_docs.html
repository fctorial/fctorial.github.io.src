<!DOCTYPE html>
<html lang="en">
<body>
<article>
    <p>
        Constexpr.js compiler injects some methods in the runtime of a page which the rendering code can use to coordinate/manipulate
        the behaviour of the compiler. This page describes these methods.
    </p>
    <ul id="api_methods">
        <li>
            <prog class="language-js">window._ConstexprJS_.compile()</prog>
            <p>
                The rendering code should call this method once it has finished rendering. The page will be snapshotted and killed
                shortly after.
            </p>
        </li>
        <li>
            <prog class="language-js">window._ConstexprJS_.abort()</prog>
            <p>
                Call this method if you want the compiler to skip this page. The page will be killed shortly after.
            </p>
        </li>
        <li>
            <prog class="language-js">window._ConstexprJS_.addPaths(paths)</prog>
            <p>
                Use this method to tell the compiler that it needs to generate additional HTML files in the output directory.
                This method doesn't affect the current page in any way. See <a href="/posts/constexprjs_generator_pages.html">this page</a>
                for detailed documentation.
            </p>
        </li>
        <li>
            <prog class="language-js">window._ConstexprJS_.addExclusions(paths)</prog>
            <p>
                The argument is a list of strings. Use this method to tell the compiler to remove given paths from the
                dependency list of the current file.
            </p>
            <p>
                The compiler uses HTTP requests made by the page to figure out the dependencies that it needs to copy. Also,
                the compiler automatically removes <progi>constexpr</progi> script paths from the dependency list of an HTML file.
                But if the rendering code uses XHR to fetch a script and then <progi>eval</progi>s it, the compiler will think
                that the fetched script is a regular resource and copy it over as well.
            </p>
            <p>
                You can use this method to mark certain paths as <progi>constexpr</progi>, so that they aren't copied.
            </p>
        </li>
    </ul>
    <blockquote>
        See pages tagged with <a class="tag_element" href="/tags/generator.html?constexpr.js">constexpr.js</a> for more guides.
    </blockquote>
</article>
</body>
<script constexpr src="/static/js/constexpr/lib.js"></script>
<script constexpr src="/static/js/constexpr/index.js"></script>
<script constexpr src="/static/js/constexpr/renderer.js"></script>

<script constexpr>
  async function page_specific_stuff() {
  }
</script>

<script constexpr>
  Promise.all([site_global_rendering(), page_specific_stuff()])
    .then(() => window._ConstexprJS_.compile())
</script>

<style>
    #api_methods li + li {
        border-top: 2px solid #b6b5b5;
    }
</style>

</html>
