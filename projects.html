<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Projects</title>
    <link rel="stylesheet" href="static/css/global_styles.css">
    <script constexpr src="/static/js/lib.js"></script>
    <script constexpr src="/static/js/nav.js" defer></script>
</head>
<body>
<noscript constexpr>
    Please enable javascript
</noscript>
<header>
    <h3 id="main_title">Projects</h3>
</header>
<script constexpr>
    fetch("/collections/projects.json")
    .then(res => res.json())
    .then(ps => {
      const el = make_element(`<table><tbody></tbody></table>`)
      console.log(el)
      ps.forEach(
        p => {
          const newChild = make_element(
            `
          <tr>
              <td><a href="${p.url}">${p.name}</a></td>
              <td>${p.description}</td>
          </tr>
          `,
            "table"
          );
          el.children[0].appendChild(
            newChild
          )
        }
      )
      const header = document.querySelector("header")
      header.parentNode.insertBefore(el, header.nextSibling)
    })
      .then(() => {
        window._ConstexprJS_.compile()
      })

</script>
<style>
    table td {
        padding: 1em;
        border: 1px solid black;
    }
</style>
</body>
</html>
